<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahou Shoujo Cababas</title>
    <link rel="stylesheet" href="homeStyle.css">
    <script src="gameLoop.js" defer></script>
</head>
<body>
    <div class="banner-card">
        <img src="magic sky.jpg" alt="Magic Sky" class="banner-image">
        <img src="Cababas Default Drawn.png" alt="Cababas" class="character-image">
        <a href="index.html">
            <button class="start-button">Press to Start</button>
        </a>
        
        <div class="banner-text" id="intro-text">
            <h1>Mahou Shoujo Cababas</h1>
            <p>Help Cababas fight against the alpha wolves as they try to invade the sky!</p>
            <p>Swipe by clicking and dragging your mouse or you can move your finger in the direction of the arrows above the alphas.  Text-to-speech will also tell you the direction of the arrows</p>
            <p>Press the "f" key on your keyboard to play the game</p>
            <p>Press the "j" key on your keyboard to replay the instructions</p>
        </div>
    </div>

    <script>
        let currentSpeech = null; // Global variable to hold the current speech

        function speakIntroText(){
            const introElement = document.getElementById('intro-text');
            const text = introElement.innerText;
            const speech = new SpeechSynthesisUtterance(text);
            speech.volume = 1;
            speech.rate = 1;
            speech.pitch = 1;
            
            // If there is already speech being spoken, cancel it before speaking the new one
            if (currentSpeech !== null) {
                window.speechSynthesis.cancel(); // Cancel any ongoing speech
            }

            // Set the new speech to the global variable and start speaking it
            currentSpeech = speech;
            window.speechSynthesis.speak(speech);
        }

        window.onload = function() {
            speakIntroText();
        };

        document.addEventListener('keydown', function(event) {
            if (event.key === 'j') {
                speakIntroText();
            }

            if (event.key === 'f') {
                window.location.href = 'index.html'; // Redirect to the game page
            }
        });
    </script>
</body>
</html>